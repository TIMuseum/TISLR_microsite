<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LandingPageLocal</title>
    <link type="text/css" rel="stylesheet" href="css/main.css">
</head>

<body>
    <canvas  id="myCanvas"></canvas>
    <div class="main">
    <section id="TitleScreen">  
        <div id="titleTxt"> 
             <h1>Urban Planning</h1>
            <h2>For the Deep</h2>
        </div>
        <h4>How the Design for the New Treasure<br> Island Reckons with Sea Level Rise</h4>
        <button class="downArrow"type="button"onclick= "nextSection(ClimateMaps)">
            <img src="icons/down.svg"> 
        </button>   
    </section>
    <div class="nav" id="TopNav">
        <button class="navItem">
        <img src="icons/logo.png"> 
        </button>
        <button class="navItem">
            <a href="pages/map.html">Main Map</a>
        </button>
        <button class="navItem">
            <a href="pages/about.html">About</a>
        </button>
    </div>
    <section id="ClimateMaps">  
        <div class="TISLR1">
            <div>
            <h2>Treasure island &<br>Sea Level Rise</h2>
            <h3>100 year Flood</h3>
            <p>These dynamic flood maps demonstrate probable flooding on TI in the event of a 100-year storm at various points over the next quarter-century. The maps on the left and right show before and after --that is expected flooding without redevelopment, as the island has been for its first 100 years, and with the reconstruction planned by the Treasure Island Development Authority, a state agency. Use the slider to show different outcomes for future scenarios, with and without the redevelopment.</p>
            <p>Scientists expect sea levels to rise at TI by between 5 and 16 inches by 2050, and between 24 and 66 inches by 2100, depending on how quickly glaciers melt and oceans warm. The Treasure Island Development Authority (TIDA) plans redevelopment in two phases in anticipation of the rising seas. The first phase will protect the island from 16 inches of sea-level rise (SLR), expected by mid-century.  The second phase of development will protect the island from 36 inches of SLR, expected by the end of this century. </p>
            <p>The flood simulations here are run for two SLR projections. The medium scenario includes 11” of sea-level rise by 2050, which is near the middle of the range of possibilities. The high scenario anticipates 24” of SLR by 2050, which is near the high end.  A flood of this height might flow across some of planned setbacks (landscape adaptations), but would not harm any of the buildings.</p>
        </div>
              <div class="modelShifter">
            <div id="scenarios">
                <button class="scenario selected" type="button"><h7>medium slr</h7></button>
                <button class="scenario"type="button"><h7>high slr</h7></button>
                </div>
            <div id="interactive">
           <h5>slr since 2000</h5>
           <div id="sliderBar">
            <div id="topSLR">
                <button id="yrSelected"type="button"><h6>4 in</h6></button>
                <button type="button"><h6>7 in</h6></button>
                <button type="button"><h6>11 in</h6></button>
               </div>
            <div id="slider">
                <div id="sliderRect"></div>
                <div class="sliderRectEND"></div>
                <div class="sliderRectEND" id="end"></div>
            </div>
            <div class="circle "></div>
            <div class="circle"></div>
            <div class="circle currentCirc"></div>
            <div id="year">
                <button id="yrSelected"type="button"><h6 >2022</button>
                <button type="button"><h6>2035</h6></button>
                <button type="button"><h6>2020</h6></button>
               </div>
            </div>
        </div>
        </div>
         </div>
        <div class="TISLR2">
            <div id="with">
            <h4><span>With</span> redevelopment </h4>
            <div class="adMap">
           <img class="adMap" src="media/FloodBase.png"> 
           <img class="floodmap adMap"src="media/FLOOD_H:M22:35A.png">
           </div>
        </div>
        <div id="without">
           <div class="nAdMap">
            <h4><span>Without</span> redevelopment</h4>
           <img src="media/NDbase.png"> 
           <img class="floodmap adMap"src="media/FLOOD_M2022NA.png"> </div>
        </div>
        </div>
            <!-- <button class="downArrow"type="button"onclick= "nextSection(introNar)">
                <img src="icons/down.svg"> 
            </button>    -->
        </section>
        <section id="introNar">  
        </section>
    </div>
</body>

<script type="module">
    import * as THREE from "./js/build/three.module.js";
    import { Water } from "./js/examples/jsm/objects/Water2.js"

    let scene, camera, renderer, water, ground, increasing,  waterlines;
    const canvas = document.getElementById("myCanvas");
init();
animate();
function init() {
increasing =true; 
    // scene
    scene = new THREE.Scene();
    // camera
    camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 0.1, 500 );
    camera.position.set( -1, 80, 0 );
    camera.lookAt( scene.position );

    // light
    var hemLight = new THREE.HemisphereLight(0xffffbb, 0x0808dd, 1);
  scene.add(hemLight); 
    const map = new THREE.TextureLoader();
    const groundGeometry = new THREE.PlaneGeometry( 600, 1000, 10, 10 );
    const groundMaterial = new THREE.MeshBasicMaterial( { color: 0xcccccc } );
     ground = new THREE.Mesh( groundGeometry, groundMaterial );
    ground.rotation.x = -90 * (Math.PI / 180);
    ground.rotation.z = -90 * (Math.PI / 180);
    scene.add( ground );
    const textureLoader = new THREE.TextureLoader();
     textureLoader.load( 'textures/waterBkgrnd.png', function ( map ) {
        map.wrapS = THREE.RepeatWrapping;
        map.wrapT = THREE.RepeatWrapping;
        map.repeat.set( 1, 1 );
        groundMaterial.map = map;
        groundMaterial.needsUpdate = true;
    } );
   
  //MAP PLANE
  var planeGeometry = new THREE.PlaneGeometry(8, 5);
  var planeMaterial = new THREE.MeshStandardMaterial({
    map: map,
    transparent: true,
    side: THREE.DoubleSide,
    depthWrite: false
  });
  let mapPlane = new THREE.Mesh(planeGeometry, planeMaterial);
  mapPlane.rotation.x =  Math.PI * - 0.5;
    ground.position.set(-410, -100, 130); 

    const waterGeometry = new THREE.PlaneGeometry( window.innerWidth, window.innerHeight
     );
    const flowMap = textureLoader.load('textures/Water_1_M_Flow.jpg' );
    water = new Water( waterGeometry, {
        scale: 2,
        textureWidth: 1024,
        textureHeight: 1024,
        flowMap: flowMap
    } );
    water.position.y = 1;
    water.rotation.x = Math.PI * - 0.5;
    scene.add( water );

    // flow map helper
    const helperGeometry = new THREE.PlaneGeometry( 200, 200 );
    const helperMaterial = new THREE.MeshBasicMaterial( { map: flowMap } );
    const helper = new THREE.Mesh( helperGeometry, helperMaterial );
    helper.position.y = 1.01;
    helper.rotation.x = Math.PI * - 0.5;
    helper.visible = false;
    scene.add( helper );
    // renderer
    renderer = new THREE.WebGLRenderer( {
         antialias: true,
         canvas: canvas, 
         alpha: true,
     } );
    renderer.setSize( window.innerWidth, window.innerHeight );
    renderer.setPixelRatio( window.devicePixelRatio );
    document.body.appendChild( renderer.domElement );
    window.addEventListener( 'resize', onWindowResize );
    document.body.style.background = "url(" + canvas.toDataURL() + ")";
}
function onWindowResize() {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize( window.innerWidth, window.innerHeight );
}
function animate() {
    if( ground.position.x< 400 &&increasing ==true){
        ground.position.x+=.05; 
        // ground.position.z+=.005; 
    }
    else if(ground.position.x>0 &&increasing ==false){
        ground.position.x-=.05; 
        // ground.position.z-=.005; 
    }
    else if(ground.position.x>=400 && increasing ==true){
        increasing =false; 
        ground.position.x-=.005; 
        // ground.position.z-=.01; 
    }
    else if(ground.position.x<=0 &&increasing ==false){
        increasing =true; 
        ground.position.x+=.005; 
        // ground.position.z+=.01; 
    }
    requestAnimationFrame( animate );
    render();
}
function render() {
    renderer.render( scene, camera );
}
</script>
<script src="js/landingPage.js"></script> 
</html>
